services:
  unbound:
    image: mvance/unbound
    container_name: unbound
    hostname: unbound
    restart: unless-stopped
    volumes:
      - ${UNBOUND_CONF_FOLDER:-./unbound/conf}:/opt/unbound/etc/unbound
      - ${UNBOUND_DATA_FOLDER:-./unbound/data}:/opt/unbound/var/lib/unbound
      - ./unbound.conf:/opt/unbound/etc/unbound/unbound.conf
    ports:
      - "5335:5335/udp" # Port for Unbound to listen on, change if needed
      - "5335:5335/tcp"
    networks:
      net:
        ipv4_address: 172.20.0.10

  adguardhome:
    image: adguard/adguardhome
    container_name: adguardhome
    hostname: adguardhome
    ports:
      - "53:53/tcp"
      - "53:53/udp"
      - "${HTTP_PORT:-80}:80/tcp"
      - "${HTTPS_PORT:-443}:443/tcp"
    volumes:
      - ${WORK_FOLDER:-./work}:/opt/adguardhome/work
      - ${CONFIG_FOLDER:-./config}:/opt/adguardhome/conf
    restart: unless-stopped
    networks:
      net:
        ipv4_address: 172.20.0.20

networks:
  net:
    ipam:
      config:
        - subnet: 172.20.0.0/24